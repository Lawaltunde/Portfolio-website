{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
<div class="admin-container">
  <div class="admin-header">
    <h2>Blog Manager</h2>
    <div class="admin-nav">
      <a class="btn btn-light" href="{{ url_for('routes.admin_projects') }}">Manage Projects</a>
      <form action="{{ url_for('auth.logout') }}" method="post" style="display:inline;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button type="submit" class="linklike">Logout</button>
      </form>
    </div>
  </div>

  <section class="card">
    <h3>Create Blog Post</h3>
    <form method="POST" action="{{ url_for('routes.admin_blogs') }}" class="grid-form">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <label class="full">
        <span>Title</span>
        <input type="text" name="title" required>
      </label>
      <label class="full">
        <span>Content</span>
        <textarea name="content" rows="8" required></textarea>
      </label>
      <div class="actions full">
        <button type="submit" class="btn">Publish</button>
      </div>
    </form>
  </section>

  <section class="card">
    <h3>Your Blog Posts</h3>
    <div class="list">
      {% for post in posts %}
        <article class="list-item">
          <div class="text">
            <h4><a href="{{ url_for('routes.blog_detail', post_id=post.id) }}" target="_blank">{{ post.title }}</a></h4>
            <p class="meta">{{ post.created_at }}</p>
          </div>
          <form method="POST" action="{{ url_for('routes.delete_blog', post_id=post.id) }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="btn btn-danger">Delete</button>
          </form>
        </article>
      {% else %}
        <p>You haven't created any posts yet.</p>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
